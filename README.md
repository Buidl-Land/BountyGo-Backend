# BountyGo Backend

ğŸš€ AI-powered bounty task aggregation and matching platform backend service with intelligent URL parsing capabilities.

## ğŸ“– é¡¹ç›®æ¦‚è¿°

BountyGoæ˜¯ä¸€ä¸ªæ™ºèƒ½èµé‡‘ä»»åŠ¡èšåˆå’ŒåŒ¹é…å¹³å°ï¼Œè§£å†³Web3èµé‡‘ç”Ÿæ€ç³»ç»Ÿä¸­çš„ç¢ç‰‡åŒ–é—®é¢˜ã€‚åç«¯é‡‡ç”¨ç°ä»£åŒ–çš„å¼‚æ­¥æ¶æ„ï¼Œé›†æˆäº†å…ˆè¿›çš„AIæŠ€æœ¯ï¼Œæä¾›é«˜æ€§èƒ½çš„APIæœåŠ¡å’Œæ™ºèƒ½URLè§£æåŠŸèƒ½ã€‚

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

#### ğŸ¤– AIé©±åŠ¨çš„URL Agentï¼ˆå…¨æ–°åŠŸèƒ½ï¼‰
- **æ™ºèƒ½URLè§£æ**: è‡ªåŠ¨ä»ä»»ä½•URLæå–ç»“æ„åŒ–ä»»åŠ¡ä¿¡æ¯
- **AIå†…å®¹åˆ†æ**: ä½¿ç”¨PPIOæ¨¡å‹æ™ºèƒ½è¯†åˆ«ä»»åŠ¡æ ‡é¢˜ã€å¥–åŠ±ã€æˆªæ­¢æ—¥æœŸç­‰
- **Playwrightåçˆ¬è™«**: æ”¯æŒå¤æ‚JavaScriptç½‘ç«™å’Œç¤¾äº¤åª’ä½“å¹³å°
- **å¤šç½‘ç«™æ”¯æŒ**: æ”¯æŒGitHubã€Twitter/Xã€ä»»åŠ¡ä¼—åŒ…å¹³å°ç­‰29+ç½‘ç«™
- **å®æ—¶å¤„ç†**: ç«¯åˆ°ç«¯å¤„ç†æ—¶é—´< 15ç§’ï¼Œé«˜æ•ˆç¨³å®š

#### ğŸ–¼ï¸ æ™ºèƒ½å›¾ç‰‡è§£æï¼ˆæ–°å¢åŠŸèƒ½ï¼‰
- **è§†è§‰ä»»åŠ¡è¯†åˆ«**: ä»å›¾ç‰‡ä¸­æ™ºèƒ½æå–ä»»åŠ¡ä¿¡æ¯
- **å¤šæ ¼å¼æ”¯æŒ**: æ”¯æŒJPGã€PNGã€GIFã€BMPã€WebPç­‰æ ¼å¼
- **PPIOè§†è§‰æ¨¡å‹**: ä½¿ç”¨å…ˆè¿›çš„è§†è§‰è¯­è¨€æ¨¡å‹è¿›è¡Œå›¾ç‰‡åˆ†æ
- **åœºæ™¯é€‚é…**: æ”¯æŒä»»åŠ¡æˆªå›¾ã€æ‹›è˜æµ·æŠ¥ã€éœ€æ±‚æ–‡æ¡£ç­‰å¤šç§åœºæ™¯
- **ç»“æ„åŒ–è¾“å‡º**: è‡ªåŠ¨è½¬æ¢ä¸ºæ ‡å‡†JSONæ ¼å¼çš„ä»»åŠ¡ä¿¡æ¯

#### ğŸ¤ å¤šAgentåä½œç³»ç»Ÿï¼ˆCAMEL-AIé›†æˆï¼‰
- **ä¸“ä¸šåŒ–åˆ†å·¥**: ä¸åŒAgentè´Ÿè´£ä¸åŒä¸“ä¸šé¢†åŸŸï¼ˆURLè§£æã€å›¾ç‰‡åˆ†æã€è´¨é‡æ£€æŸ¥ç­‰ï¼‰
- **CAMEL-AI Workforce**: é›†æˆä¸šç•Œé¢†å…ˆçš„å¤šAgentåä½œæ¡†æ¶
- **æ™ºèƒ½æ¨¡å‹é€‰æ‹©**: æ ¹æ®ä»»åŠ¡ç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„AIæ¨¡å‹
- **åä½œæ¨¡å¼**: æ”¯æŒPipelineã€Hierarchicalã€Workforceç­‰å¤šç§åä½œæ¨¡å¼
- **å¯é…ç½®æ¶æ„**: æ”¯æŒç¯å¢ƒå˜é‡å’Œä»£ç é…ç½®ä¸¤ç§æ–¹å¼

#### ğŸ” èº«ä»½è®¤è¯ä¸ç”¨æˆ·ç®¡ç†
- JWT + Google OAuth èº«ä»½è®¤è¯
- ç”¨æˆ·ç®¡ç†å’ŒWeb3é’±åŒ…é›†æˆ
- å¤šé’±åŒ…åœ°å€ç»‘å®šæ”¯æŒ

#### ğŸ“‹ ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ
- èµé‡‘ä»»åŠ¡CRUDæ“ä½œ
- æ™ºèƒ½ä»»åŠ¡æ¨èç®—æ³•
- ä»»åŠ¡çŠ¶æ€è·Ÿè¸ªå’Œç”Ÿå‘½å‘¨æœŸç®¡ç†
- ä»»åŠ¡æµè§ˆç»Ÿè®¡å’Œåˆ†æ

#### ğŸ·ï¸ æ™ºèƒ½æ ‡ç­¾ç³»ç»Ÿ
- åŠ¨æ€æ ‡ç­¾åˆ†ç±»å’Œç®¡ç†
- ç”¨æˆ·å…´è¶£æ ‡ç­¾ç”»åƒ
- æ ‡ç­¾æƒé‡ç®—æ³•ä¼˜åŒ–

#### ğŸ’¬ ç¤¾äº¤ä¸äº¤äº’
- ä»»åŠ¡è®¨è®ºå’Œæ¶ˆæ¯ç³»ç»Ÿ
- ç”¨æˆ·è¡Œä¸ºåˆ†æå’Œç»Ÿè®¡
- å®æ—¶é€šçŸ¥æœºåˆ¶

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æ¡†æ¶
- **FastAPI 0.104+**: é«˜æ€§èƒ½å¼‚æ­¥Webæ¡†æ¶
- **Uvicorn**: ASGIæœåŠ¡å™¨
- **Pydantic v2**: æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–

### æ•°æ®åº“ä¸å­˜å‚¨
- **PostgreSQL 17+**: ä¸»æ•°æ®åº“
- **SQLAlchemy 2.0**: å¼‚æ­¥ORM
- **Alembic**: æ•°æ®åº“è¿ç§»å·¥å…·
- **Redis**: ä¼šè¯ç®¡ç†å’Œç¼“å­˜

### ğŸ¤– AIä¸æ™ºèƒ½å¤„ç†
- **PPIOæ¨¡å‹**: å…ˆè¿›çš„AIè¯­è¨€æ¨¡å‹ï¼Œæ”¯æŒä¸­è‹±æ–‡å’Œè§†è§‰ç†è§£
- **PPIOè§†è§‰æ¨¡å‹**: æ”¯æŒå›¾ç‰‡åˆ†æçš„å¤šæ¨¡æ€AIæ¨¡å‹
- **CAMEL-AI**: ä¸šç•Œé¢†å…ˆçš„å¤šAgentåä½œæ¡†æ¶ï¼Œæ”¯æŒWorkforceæ¨¡å—
- **Playwright**: ä¼ä¸šçº§ç½‘é¡µè‡ªåŠ¨åŒ–å’Œåçˆ¬è™«æŠ€æœ¯
- **BeautifulSoup4 + Readability**: æ™ºèƒ½å†…å®¹æå–
- **Pillow (PIL)**: å›¾ç‰‡å¤„ç†å’Œæ ¼å¼è½¬æ¢
- **å¼‚æ­¥å¤„ç†**: å…¨å¼‚æ­¥AIæ¨ç†å’Œå†…å®¹å¤„ç†

### å®‰å…¨ä¸è®¤è¯
- **JWT**: æ— çŠ¶æ€èº«ä»½è®¤è¯
- **Google OAuth**: ç¬¬ä¸‰æ–¹ç™»å½•
- **Python-JOSE**: åŠ å¯†å’Œç­¾å

### å¼€å‘ä¸æµ‹è¯•
- **Pytest**: å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **Black + isort + flake8**: ä»£ç è´¨é‡å·¥å…·
- **Structlog**: ç»“æ„åŒ–æ—¥å¿—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd BountyGo-Backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
conda create -n bountygo python=3.11
conda activate bountygo

# æˆ–ä½¿ç”¨venv
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate  # Windows

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# å¯é€‰ï¼šå®‰è£…CAMEL-AIå¤šAgentæ¡†æ¶
pip install camel-ai  # å¯ç”¨å¤šAgentåä½œåŠŸèƒ½
```

### 2. ç¯å¢ƒé…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# åº”ç”¨é…ç½®
DEBUG=true
SECRET_KEY=your-secret-key-here
ENVIRONMENT=development

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql+asyncpg://username:password@host:port/database

# Redisé…ç½®
REDIS_URL=redis://host:port/db

# Google OAuthé…ç½®
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ğŸ¤– AI Agenté…ç½®ï¼ˆURLè§£æ + å›¾ç‰‡è§£æ + å¤šAgentåä½œï¼‰
PPIO_API_KEY=your-ppio-api-key
PPIO_BASE_URL=https://api.ppinfra.com/v3/openai
PPIO_MODEL_NAME=moonshotai/kimi-k2-instruct

# å¤šAgentç³»ç»Ÿé…ç½®ï¼ˆå¯é€‰ï¼‰
MULTI_AGENT_FRAMEWORK=camel-ai
URL_PARSER_MODEL=qwen/qwen3-coder-480b-a35b-instruct
IMAGE_ANALYZER_MODEL=baidu/ernie-4.5-vl-28b-a3b
CONTENT_EXTRACTOR_MODEL=moonshotai/kimi-k2-instruct
TASK_CREATOR_MODEL=deepseek/deepseek-r1-0528
QUALITY_CHECKER_MODEL=qwen/qwen3-235b-a22b-instruct-2507

# CORSé…ç½®
ALLOWED_HOSTS=*
```

### 3. ğŸ¤– URL AgentåŠŸèƒ½æµ‹è¯•

éªŒè¯AIé©±åŠ¨çš„URLè§£æåŠŸèƒ½ï¼š

```bash
# æ¿€æ´»ç¯å¢ƒ
conda activate bountygo  # æˆ–å…¶ä»–ç¯å¢ƒ

# æµ‹è¯•URL Agentæ ¸å¿ƒåŠŸèƒ½
python app/agent/test_integration.py

# éªŒè¯å®ç°å®Œæ•´æ€§
python app/agent/verify_implementation.py

# æµ‹è¯•çœŸå®URLè§£æï¼ˆéœ€è¦PPIO APIå¯†é’¥ï¼‰
python -c "
import asyncio
from app.agent.service import URLAgentService

async def test():
    service = URLAgentService()
    result = await service.process_url('https://github.com/microsoft/vscode', user_id='test')
    if result.success:
        info = result.extracted_info
        print(f'æ ‡é¢˜: {info.title}')
        print(f'å¥–åŠ±: {info.reward} {info.reward_currency}')
        print(f'æ ‡ç­¾: {info.tags}')
    else:
        print(f'å¤±è´¥: {result.error_message}')

asyncio.run(test())
"
```

### 4. æ•°æ®åº“åˆå§‹åŒ–å’Œå…¨é¢æµ‹è¯•

```bash
# è¿è¡Œå…¨é¢ç³»ç»Ÿæµ‹è¯•
python scripts/test_all.py
```

è¿™ä¸ªè„šæœ¬ä¼šæ‰§è¡Œï¼š
- âœ… æµ‹è¯•æ•°æ®åº“è¿æ¥
- âœ… åˆ›å»ºæ‰€æœ‰æ•°æ®åº“è¡¨å’Œç´¢å¼•
- âœ… æ’å…¥ç¤ºä¾‹æ•°æ®
- âœ… éªŒè¯æ¨¡å‹å’Œschemas
- âœ… æµ‹è¯•æ•°æ®åº“æŸ¥è¯¢
- âœ… å¯åŠ¨å¹¶æµ‹è¯•APIæœåŠ¡å™¨
- âœ… æµ‹è¯•URL AgentåŠŸèƒ½

### 5. å¯åŠ¨åº”ç”¨ç¨‹åº

```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# æˆ–è€…ä½¿ç”¨Pythonç›´æ¥è¿è¡Œ
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 6. è®¿é—®APIæ–‡æ¡£

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®ä»¥ä¸‹åœ°å€ï¼š

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc  
- **OpenAPIè§„èŒƒ**: http://localhost:8000/openapi.json
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health

## ğŸ“Š æ•°æ®åº“æ¶æ„

### æ ¸å¿ƒè¡¨ç»“æ„

| è¡¨å | ç”¨é€” | ä¸»è¦å­—æ®µ |
|------|------|----------|
| `users` | ç”¨æˆ·ä¿¡æ¯ | id, email, nickname, google_id |
| `tags` | ç³»ç»Ÿæ ‡ç­¾ | id, name, category, usage_count |
| `tasks` | èµé‡‘ä»»åŠ¡ | id, title, reward, sponsor_id, status |
| `user_wallets` | Web3é’±åŒ… | id, user_id, wallet_address |
| `user_tag_profiles` | ç”¨æˆ·å…´è¶£ | id, user_id, tag_id, weight |
| `task_tags` | ä»»åŠ¡æ ‡ç­¾å…³è” | id, task_id, tag_id |
| `todos` | ç”¨æˆ·å¾…åŠ | id, user_id, task_id, remind_flags |
| `messages` | ä»»åŠ¡è®¨è®º | id, task_id, user_id, content |
| `task_views` | æµè§ˆç»Ÿè®¡ | id, task_id, user_id, viewed_at |
| `refresh_tokens` | JWTä»¤ç‰Œ | id, user_id, token_hash, expires_at |

### æ€§èƒ½ä¼˜åŒ–

ç³»ç»ŸåŒ…å«11ä¸ªæ€§èƒ½ä¼˜åŒ–ç´¢å¼•ï¼š
- ä»»åŠ¡æŸ¥è¯¢ä¼˜åŒ– (`idx_tasks_sponsor_status`)
- ç”¨æˆ·æ•°æ®ä¼˜åŒ– (`idx_todos_user_active`)
- æ ‡ç­¾æœç´¢ä¼˜åŒ– (`idx_tags_category`, `idx_tags_name`)
- å…³è”æŸ¥è¯¢ä¼˜åŒ– (`idx_task_tags_*`, `idx_user_tag_profiles_*`)
- åˆ†æç»Ÿè®¡ä¼˜åŒ– (`idx_task_views_*`, `idx_messages_task_created`)

## ğŸ”Œ APIç«¯ç‚¹

### ğŸ¤– URL Agentç›¸å…³ï¼ˆæ–°å¢ï¼‰
- `POST /api/v1/url-agent/extract-info` - ä»URLæå–ä»»åŠ¡ä¿¡æ¯
- `POST /api/v1/url-agent/process` - å®Œæ•´URLå¤„ç†+å¯é€‰åˆ›å»ºä»»åŠ¡
- `POST /api/v1/url-agent/extract-from-content` - ä»æ–‡æœ¬å†…å®¹æå–ä¿¡æ¯
- `GET /api/v1/url-agent/status` - æ£€æŸ¥URL AgentæœåŠ¡çŠ¶æ€
- `GET /api/v1/url-agent/metrics` - è·å–å¤„ç†æ€§èƒ½æŒ‡æ ‡
- `POST /api/v1/url-agent/reset-metrics` - é‡ç½®æ€§èƒ½ç»Ÿè®¡

### è®¤è¯ç›¸å…³
- `POST /api/v1/auth/google` - Google OAuthç™»å½•
- `POST /api/v1/auth/refresh` - åˆ·æ–°JWTä»¤ç‰Œ
- `POST /api/v1/auth/logout` - ç”¨æˆ·ç™»å‡º

### ç”¨æˆ·ç®¡ç†
- `GET /api/v1/users/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- `PUT /api/v1/users/me` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `POST /api/v1/users/wallets` - æ·»åŠ é’±åŒ…åœ°å€

### ä»»åŠ¡ç®¡ç†
- `GET /api/v1/tasks` - è·å–ä»»åŠ¡åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ï¼‰
- `POST /api/v1/tasks` - åˆ›å»ºæ–°ä»»åŠ¡
- `GET /api/v1/tasks/{id}` - è·å–ä»»åŠ¡è¯¦æƒ…
- `PUT /api/v1/tasks/{id}` - æ›´æ–°ä»»åŠ¡
- `DELETE /api/v1/tasks/{id}` - åˆ é™¤ä»»åŠ¡

### æ ‡ç­¾ç³»ç»Ÿ
- `GET /api/v1/tags` - è·å–æ‰€æœ‰æ ‡ç­¾
- `POST /api/v1/tags` - åˆ›å»ºæ–°æ ‡ç­¾
- `GET /api/v1/tags/search` - æœç´¢æ ‡ç­¾

### ç³»ç»Ÿç›‘æ§
- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /docs` - APIæ–‡æ¡£
- `GET /openapi.json` - OpenAPIè§„èŒƒ

## ğŸ¤– URL Agentä½¿ç”¨æŒ‡å—

### åŸºæœ¬ç”¨æ³•

```python
# æ–¹å¼ä¸€ï¼šç›´æ¥ä½¿ç”¨Serviceç±»ï¼ˆæ¨èï¼‰
import asyncio
from app.agent.service import URLAgentService

async def parse_url():
    service = URLAgentService()
    result = await service.process_url(
        url="https://github.com/microsoft/vscode",
        user_id="user_123",
        auto_create=False  # ä¸è‡ªåŠ¨åˆ›å»ºä»»åŠ¡ï¼Œåªæå–ä¿¡æ¯
    )
    
    if result.success:
        info = result.extracted_info
        print(f"æ ‡é¢˜: {info.title}")
        print(f"å¥–åŠ±: {info.reward} {info.reward_currency}")
        print(f"æˆªæ­¢æ—¥æœŸ: {info.deadline}")
        print(f"æ ‡ç­¾: {info.tags}")
        print(f"éš¾åº¦: {info.difficulty_level}")
        print(f"å·¥æ—¶: {info.estimated_hours}å°æ—¶")

asyncio.run(parse_url())
```

```python
# æ–¹å¼äºŒï¼šä½¿ç”¨Factoryæ–¹æ³•
from app.agent.factory import get_url_parsing_agent
from app.agent.playwright_extractor import PlaywrightContentExtractor

async def simple_parse():
    agent = get_url_parsing_agent()
    extractor = PlaywrightContentExtractor()
    
    try:
        # æå–ç½‘é¡µå†…å®¹
        web_content = await extractor.extract_content(url)
        # AIåˆ†æå†…å®¹
        task_info = await agent.analyze_content(web_content)
        print(f"è§£æç»“æœ: {task_info.title}")
    finally:
        await extractor.close()
```

### APIè°ƒç”¨ç¤ºä¾‹

```bash
# ä½¿ç”¨curlæµ‹è¯•URLè§£æ
curl -X POST "http://localhost:8000/api/v1/url-agent/extract-info" \
     -H "Content-Type: application/json" \
     -d '{"url": "https://github.com/microsoft/vscode"}'

# å®Œæ•´å¤„ç†ï¼ˆéœ€è¦è®¤è¯ï¼‰
curl -X POST "http://localhost:8000/api/v1/url-agent/process" \
     -H "Authorization: Bearer YOUR_TOKEN" \
     -H "Content-Type: application/json" \
     -d '{"url": "https://github.com/microsoft/vscode", "auto_create": false}'
```

### æ”¯æŒçš„ç½‘ç«™ç±»å‹

#### âœ… ä»£ç æ‰˜ç®¡å¹³å°
- GitHub, GitLab, Bitbucket

#### âœ… å¼€å‘è€…ç¤¾åŒº  
- StackOverflow, Dev.to, HackerNoon

#### âœ… ä»»åŠ¡å¹³å°
- DoraHacks, Gitcoin, Upwork, Freelancer

#### âœ… ç¤¾äº¤åª’ä½“
- Twitter/X, Facebook, LinkedIn, Reddit

#### âœ… åšå®¢å¹³å°
- Medium, Substack, Notion

### æ€§èƒ½ç‰¹å¾
- **å¤„ç†é€Ÿåº¦**: å¹³å‡10-15ç§’ç«¯åˆ°ç«¯å¤„ç†
- **æˆåŠŸç‡**: GitHubç­‰ä¸»æµç½‘ç«™100%æˆåŠŸç‡
- **å‡†ç¡®æ€§**: AIä¿¡æ¯æå–å‡†ç¡®ç‡80%+
- **å¹¶å‘æ”¯æŒ**: å¼‚æ­¥å¤„ç†ï¼Œæ”¯æŒé«˜å¹¶å‘

## ğŸ§ª æµ‹è¯•

### URL Agentä¸“é¡¹æµ‹è¯•
```bash
# æ ¸å¿ƒåŠŸèƒ½é›†æˆæµ‹è¯•
python app/agent/test_integration.py

# å®ç°å®Œæ•´æ€§éªŒè¯
python app/agent/verify_implementation.py

# PPIOæ¨¡å‹è¿æ¥æµ‹è¯•
python -m app.agent.test_connection

# å®¢æˆ·ç«¯åŠŸèƒ½æµ‹è¯•
python -m app.agent.test_client
```

### ä¼ ç»Ÿæµ‹è¯•
```bash
# å…¨é¢ç³»ç»Ÿæµ‹è¯•
python scripts/test_all.py

# å•å…ƒæµ‹è¯•
pytest tests/ -v

# æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
pytest tests/ --cov=app --cov-report=html
```

### æ‰‹åŠ¨APIæµ‹è¯•
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# URL AgentçŠ¶æ€æ£€æŸ¥
curl http://localhost:8000/api/v1/url-agent/status

# è·å–APIæ–‡æ¡£
curl http://localhost:8000/openapi.json
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
BountyGo-Backend/
â”œâ”€â”€ app/                        # åº”ç”¨ç¨‹åºä»£ç 
â”‚   â”œâ”€â”€ agent/                  # ğŸ¤– URL Agentæ¨¡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”‚   â”œâ”€â”€ service.py          # URLAgentServiceä¸»æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ url_parsing_agent.py # AIè§£æä»£ç†
â”‚   â”‚   â”œâ”€â”€ playwright_extractor.py # Playwrightå†…å®¹æå–
â”‚   â”‚   â”œâ”€â”€ client.py           # PPIOæ¨¡å‹å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ config.py           # Agenté…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ factory.py          # å·¥å‚æ–¹æ³•
â”‚   â”‚   â”œâ”€â”€ models.py           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ test_integration.py # é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ verify_implementation.py # éªŒè¯è„šæœ¬
â”‚   â”œâ”€â”€ api/v1/                 # APIè·¯ç”±
â”‚   â”‚   â””â”€â”€ endpoints/
â”‚   â”‚       â””â”€â”€ url_agent.py    # URL Agent APIç«¯ç‚¹
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ models/                 # æ•°æ®åº“æ¨¡å‹
â”‚   â”œâ”€â”€ schemas/                # Pydantic schemas
â”‚   â”œâ”€â”€ services/               # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ main.py                 # åº”ç”¨ç¨‹åºå…¥å£
â”œâ”€â”€ alembic/                    # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ scripts/                    # å·¥å…·è„šæœ¬
â”œâ”€â”€ tests/                      # æµ‹è¯•ä»£ç 
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”œâ”€â”€ .env                        # ç¯å¢ƒå˜é‡
â””â”€â”€ README.md                   # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç è´¨é‡
```bash
# ä»£ç æ ¼å¼åŒ–
black app/
isort app/

# ä»£ç æ£€æŸ¥
flake8 app/
```

### æ•°æ®åº“è¿ç§»
```bash
# ç”Ÿæˆæ–°çš„è¿ç§»æ–‡ä»¶
alembic revision --autogenerate -m "æè¿°"

# åº”ç”¨è¿ç§»
alembic upgrade head

# å›æ»šè¿ç§»
alembic downgrade -1
```

### æ·»åŠ æ–°çš„URL AgentåŠŸèƒ½
1. åœ¨ `app/agent/models.py` ä¸­å®šä¹‰æ–°çš„æ•°æ®æ¨¡å‹
2. åœ¨ `app/agent/client.py` ä¸­æ‰©å±•AIå®¢æˆ·ç«¯åŠŸèƒ½
3. åœ¨ `app/agent/playwright_extractor.py` ä¸­å¢å¼ºå†…å®¹æå–
4. åœ¨ `app/api/v1/endpoints/url_agent.py` ä¸­æ·»åŠ æ–°APIç«¯ç‚¹
5. ç¼–å†™ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹

### URL Agenté…ç½®ä¼˜åŒ–
```python
# æ‰©å±•æ”¯æŒçš„ç½‘ç«™åŸŸå
# åœ¨ app/agent/playwright_extractor.py ä¸­ä¿®æ”¹
self.playwright_domains.add('new-website.com')

# è°ƒæ•´AIæ¨¡å‹å‚æ•°
# åœ¨ app/agent/config.py ä¸­é…ç½®
PPIO_MODEL_NAME=your-preferred-model
PPIO_MAX_TOKENS=4000
PPIO_TEMPERATURE=0.1
```

## ğŸš¢ éƒ¨ç½²

### Dockeréƒ¨ç½²
```bash
# æ„å»ºå’Œå¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# ä½¿ç”¨Gunicornå¯åŠ¨
gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000

# ç¯å¢ƒå˜é‡é…ç½®
export ENVIRONMENT=production
export DEBUG=false
export PPIO_API_KEY=your-production-api-key
```

## ğŸ” æ•…éšœæ’é™¤

### URL Agentç›¸å…³é—®é¢˜

1. **PPIO APIè¿æ¥å¤±è´¥**
   - æ£€æŸ¥ `PPIO_API_KEY` é…ç½®
   - éªŒè¯APIå¯†é’¥æœ‰æ•ˆæ€§ï¼š`python -m app.agent.test_connection`
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸

2. **Playwrightå¯åŠ¨å¤±è´¥**
   - å®‰è£…æµè§ˆå™¨ï¼š`playwright install chromium`
   - æ£€æŸ¥ç³»ç»Ÿä¾èµ–ï¼š`playwright install-deps`
   - éªŒè¯Playwrighté…ç½®

3. **URLè§£æå¤±è´¥**
   - æ£€æŸ¥ç›®æ ‡ç½‘ç«™æ˜¯å¦åœ¨æ”¯æŒåˆ—è¡¨ä¸­
   - æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
   - æµ‹è¯•ç½‘ç»œè¿æ¥ï¼š`curl -I target-url`

### ä¼ ç»Ÿé—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ `DATABASE_URL` é…ç½®
   - ç¡®è®¤PostgreSQLæœåŠ¡è¿è¡Œæ­£å¸¸
   - éªŒè¯ç½‘ç»œè¿æ¥

2. **æ¨¡å—å¯¼å…¥é”™è¯¯**
   - ç¡®è®¤æ‰€æœ‰ä¾èµ–å·²å®‰è£…ï¼š`pip install -r requirements.txt`
   - æ£€æŸ¥Pythonè·¯å¾„é…ç½®
   - éªŒè¯è™šæ‹Ÿç¯å¢ƒæ¿€æ´»

3. **APIå¯åŠ¨å¤±è´¥**
   - æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
   - æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
   - éªŒè¯ç¯å¢ƒå˜é‡é…ç½®

### è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. è¿è¡Œç›¸åº”çš„æµ‹è¯•è„šæœ¬è¿›è¡Œè¯Šæ–­
2. æ£€æŸ¥åº”ç”¨ç¨‹åºæ—¥å¿—
3. æŸ¥çœ‹APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

### ğŸ¤– AIé©±åŠ¨ç‰¹æ€§
- **æ™ºèƒ½è§£æ**: PPIOæ¨¡å‹æ”¯æŒå¤æ‚å†…å®¹ç†è§£
- **åçˆ¬è™«æŠ€æœ¯**: Playwrightä¼ä¸šçº§ç½‘é¡µè‡ªåŠ¨åŒ–
- **å¼‚æ­¥å¤„ç†**: å…¨å¼‚æ­¥AIæ¨ç†ï¼Œæ— é˜»å¡
- **ç¼“å­˜ä¼˜åŒ–**: æ™ºèƒ½ç¼“å­˜è§£æç»“æœ

### ç³»ç»Ÿæ€§èƒ½
- **å¼‚æ­¥æ¶æ„**: å…¨å¼‚æ­¥å¤„ç†ï¼Œæ”¯æŒé«˜å¹¶å‘
- **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥**: Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- **ç´¢å¼•ä¼˜åŒ–**: 11ä¸ªæ€§èƒ½ç´¢å¼•è¦†ç›–å¸¸ç”¨æŸ¥è¯¢
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ç±»å‹æç¤ºå’ŒéªŒè¯

### æ€§èƒ½æŒ‡æ ‡
- **URLè§£æé€Ÿåº¦**: 10-15ç§’ç«¯åˆ°ç«¯å¤„ç†
- **å¹¶å‘å¤„ç†**: æ”¯æŒ100+å¹¶å‘è¯·æ±‚
- **æˆåŠŸç‡**: ä¸»æµç½‘ç«™99%+æˆåŠŸç‡
- **AIå‡†ç¡®ç‡**: ä¿¡æ¯æå–å‡†ç¡®ç‡80%+

## ğŸ¯ æŠ€æœ¯äº®ç‚¹

### ğŸš€ åˆ›æ–°åŠŸèƒ½
- **å¤šæ¨¡æ€AI**: ç»“åˆå†…å®¹æå–å’Œè¯­è¨€ç†è§£
- **æ¸è¿›å¼ç­‰å¾…**: æ™ºèƒ½ç½‘é¡µåŠ è½½ç­–ç•¥
- **åæ£€æµ‹æŠ€æœ¯**: è§„é¿è‡ªåŠ¨åŒ–æ£€æµ‹æœºåˆ¶
- **ç»“æ„åŒ–è¾“å‡º**: AIç”Ÿæˆæ ‡å‡†åŒ–æ•°æ®ç»“æ„

### ğŸ”’ å®‰å…¨ç‰¹æ€§
- **URLéªŒè¯**: é˜²æ­¢å†…ç½‘åœ°å€è®¿é—®
- **å†…å®¹è¿‡æ»¤**: å®‰å…¨çš„å†…å®¹æå–å’Œæ¸…ç†
- **é”™è¯¯éš”ç¦»**: å¼‚å¸¸å¤„ç†å’ŒæœåŠ¡é™çº§
- **èµ„æºé™åˆ¶**: å†…å®¹é•¿åº¦å’Œå¤„ç†æ—¶é—´é™åˆ¶

### ğŸŒ å…¼å®¹æ€§
- **è·¨å¹³å°**: Linux, macOS, Windows
- **å¤šæµè§ˆå™¨**: Chromiumå†…æ ¸
- **å¤šè¯­è¨€**: ä¸­è‹±æ–‡å†…å®¹ç†è§£
- **å¤šæ ¼å¼**: HTML, JSON,çº¯æ–‡æœ¬

## ğŸ›£ï¸ ä¸‹ä¸€æ­¥å¼€å‘

### ğŸ¤– AIåŠŸèƒ½å¢å¼º
- [ ] å¤šæ¨¡å‹æ”¯æŒï¼ˆGPT-4, Claudeç­‰ï¼‰
- [ ] å›¾åƒå†…å®¹ç†è§£
- [ ] å®æ—¶å­¦ä¹ å’Œä¼˜åŒ–
- [ ] è‡ªå®šä¹‰æç¤ºè¯æ¨¡æ¿

### ğŸŒ ç½‘ç«™æ”¯æŒæ‰©å±•
- [ ] æ›´å¤šä»»åŠ¡å¹³å°é›†æˆ
- [ ] å›½é™…åŒ–ç½‘ç«™æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯ç½‘é¡µé€‚é…
- [ ] APIç›´æ¥é›†æˆ

### ğŸš€ ç³»ç»Ÿä¼˜åŒ–
- [ ] åˆ†å¸ƒå¼å¤„ç†
- [ ] å®æ—¶æ¨é€é€šçŸ¥
- [ ] é«˜çº§ç¼“å­˜ç­–ç•¥
- [ ] æ€§èƒ½ç›‘æ§é¢æ¿

### ğŸ”— ç”Ÿæ€é›†æˆ
- [ ] åŒºå—é“¾æ”¯ä»˜é›†æˆ
- [ ] Web3èº«ä»½éªŒè¯
- [ ] DeFiåè®®é›†æˆ
- [ ] NFTä»»åŠ¡å‡­è¯

## ğŸ“š APIæ–‡æ¡£

å®Œæ•´çš„APIä½¿ç”¨æ–‡æ¡£è¯·å‚è€ƒï¼š

- **[URL Agent API æ–‡æ¡£](./docs/URL_AGENT_API.md)** - URLè§£æå’Œå›¾ç‰‡è§£æAPI
- **[å¤šAgentç³»ç»Ÿé…ç½®æŒ‡å—](./docs/multi_agent_configuration.md)** - CAMEL-AIå¤šAgentåä½œé…ç½®
- **[å›¾ç‰‡è§£æAPI è¯¦ç»†æ–‡æ¡£](./docs/image_parsing_api.md)** - å›¾ç‰‡åˆ†æåŠŸèƒ½çš„å®Œæ•´è¯´æ˜

### ğŸ¯ å¿«é€Ÿä½“éªŒ

```bash
# URLè§£æ
curl -X POST "http://localhost:8000/api/v1/url-agent/extract-info" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://github.com/example/project"}'

# å›¾ç‰‡è§£æ
curl -X POST "http://localhost:8000/api/v1/url-agent/upload-image" \
  -F "file=@task_image.png" \
  -F "additional_prompt=è¯·åˆ†æä»»åŠ¡ä¿¡æ¯"

# å¤šAgentåä½œï¼ˆPythonç¤ºä¾‹ï¼‰
python -c "
from app.agent.camel_workforce_service import create_camel_workforce_service
import asyncio

async def demo():
    service = create_camel_workforce_service(workforce_size=3)
    await service.initialize()
    result = await service.process_url_with_workforce('https://github.com/example/project')
    print(f'ä»»åŠ¡æ ‡é¢˜: {result.title}')

asyncio.run(demo())
"
```

## ğŸ“„ è®¸å¯è¯

MIT License

---

**ğŸ‰ BountyGo Backend - AIé©±åŠ¨çš„æ™ºèƒ½èµé‡‘ä»»åŠ¡å¹³å°ï¼**

é›†æˆäº†å…ˆè¿›çš„URLè§£æã€Playwrightåçˆ¬è™«ã€PPIO AIæ¨¡å‹ï¼Œä¸ºWeb3èµé‡‘ç”Ÿæ€æä¾›å¼ºå¤§çš„æŠ€æœ¯æ”¯æ’‘ã€‚